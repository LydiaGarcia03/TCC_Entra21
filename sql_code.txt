CREATE DATABASE IF NOT EXISTS hcdigital;

USE hcdigitaL;

CREATE TABLE profissional (
    id INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
    nome_completo VARCHAR(250) NOT NULL,
    foto BLOB NOT NULL,
    genero SET('M', 'F', 'O') NOT NULL,
    dt_nascimento DATE NOT NULL,
    email VARCHAR(250) NOT NULL,
    senha VARCHAR(32) NOT NULL, -- CRIP
    cep REAL NOT NULL, 
    end_numero INT NULL,
    end_complemento VARCHAR(250) NULL,
    tel_cel REAL NOT NULL,
    num_coren INT NOT NULL,
    # Dados bancários
    cod_banco VARCHAR(32) NOT NULL, -- CRIP
    num_agencia VARCHAR(32) NOT NULL, -- CRIP
    dig_agencia VARCHAR(32) NOT NULL, -- CRIP
    tipo_conta VARCHAR(32) NOT NULL, -- CRIP
    num_conta VARCHAR(32) NOT NULL, -- CRIP
    dig_conta VARCHAR(32) NOT NULL, -- CRIP
    num_cartao VARCHAR(32) NOT NULL, -- CRIP
    nome_user_cartao VARCHAR(32) NOT NULL, -- CRIP
    # Info acadêmica
    curso_formacao VARCHAR(250) NOT NULL,
    instituicao VARCHAR(250) NOT NULL,
    dt_ingresso DATE NOT NULL,
    avaliacao REAL NULL
) ENGINE = INNODB DEFAULT CHARSET = 'utf8';

CREATE TABLE necessitado (
    id INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
    nome_completo VARCHAR(250) NOT NULL,
    foto BLOB NULL,
    genero SET('M', 'F', 'O') NOT NULL,
    dt_nascimento DATE NOT NULL,
    email VARCHAR(250) NOT NULL,
    senha VARCHAR(32) NOT NULL, -- CRIP
    cep REAL NOT NULL,
    end_numero INT NULL,
    end_complemento VARCHAR(250) NULL,
    tel_cel REAL NOT NULL,
    tel_res REAL NULL
) ENGINE = INNODB DEFAULT CHARSET = 'utf8';

CREATE TABLE servico (
    id INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
    # Dados do paciente
    nome_paciente VARCHAR(250) NOT NULL,
    dt_nascimento_paciente DATE NOT NULL,
    genero_paciente SET('M', 'F', 'O') NOT NULL,
    tipo_servico SET('Infantil', 'Idoso', 'Enfermagem'),
    diabetico BOOLEAN NOT NULL,
    deficiencia_fisica BOOLEAN NOT NULL,
    deficiencia_mental BOOLEAN NOT NULL,
    hipertensao BOOLEAN NOT NULL,
    descricao_op VARCHAR(500) NULL,
    fk_id_necessitado INT NOT NULL,
    qtd_horas_diarias INT NOT NULL,
    dias_servico VARCHAR(250) NOT NULL,
    # Dados bancários do necessitado
    cod_banco VARCHAR(32) NOT NULL, -- CRIP
    num_agencia VARCHAR(32) NOT NULL, -- CRIP
    tipo_conta VARCHAR(32) NOT NULL, -- CRIP
    num_conta VARCHAR(32) NOT NULL, -- CRIP
    dig_conta VARCHAR(32) NOT NULL, -- CRIP
    num_cartao VARCHAR(32) NOT NULL, -- CRIP
    nome_user_cartao VARCHAR(32) NOT NULL, -- CRIP
   
    FOREIGN KEY(fk_id_necessitado) REFERENCES necessitado(id)
) ENGINE = InnoDB DEFAULT CHARSET = 'utf8';

-- CRIP de 32 caracteres é utilizado para sha512 que retorna 512 bits
-- 512 bits = 32 caracteres

INSERT INTO necessitado VALUES 
    (DEFAULT, 'Lydia Garcia', NULL, 'F', '2002-01-03', 'lydiagarcia.chan@gmail.com', '5c63b0c8d48b70eba12f932113bfeb8c3e9a2f56ca8307fc4a9f9e1349f7cde361a128b1e40eb38ce37c9892c787a54f0d407854094e723d9a3089ff0ef8eebd', '89115040', '2229', 'Fundos 2225', '47999340994', '4733322549');